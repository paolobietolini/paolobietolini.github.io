models:
  - name: stg_events
    description: >
      Staging model for GA4 event-level data. Casts event_date to DATE,
      extracts key event params, and standardizes column names from the
      raw GA4 BigQuery export.
    columns:
      - name: event_date
        description: Date of the event (cast from YYYYMMDD string to DATE)
        data_tests:
          - not_null
      - name: event_timestamp
        description: Event timestamp in microseconds (UTC)
        data_tests:
          - not_null
      - name: event_name
        description: Name of the event (e.g. page_view, purchase, session_start)
        data_tests:
          - not_null
      - name: user_pseudo_id
        description: Pseudonymous ID generated by GA4 (client ID)
        data_tests:
          - not_null
      - name: user_id
        description: User ID set via setUserId API. Null for anonymous users.
      - name: platform
        description: Platform (WEB, IOS, ANDROID)
      - name: is_user_id_missing
        description: Booleand value if a user_id is missing, i.e NULL

  - name: stg_orders
    description: >
      Staging model for backend orders. Straightforward select with
      standardized column names and types.
    columns:
      - name: order_id
        description: Order ID from our backend
        data_tests:
          - not_null
          - unique
      - name: transaction_id
        description: >
          Transaction ID sent to GA4. May be '(not set)' for
          incomplete transactions â€” cleaned to NULL in staging.
      - name: purchase_revenue
        description: Purchase revenue
      - name: shipping_value
        description: Shipping value
      - name: total_item_quantity
        description: Total item quantity
      - name: user_id
        description: Sequential identifying number
        data_tests:
          - not_null
      - name: status
        description: Order status
      - name: created_at
        description: Timestamp when the order was created

  - name: stg_users
    description: >
      Staging model for backend users. Straightforward select with
      standardized column names and types.
    columns:
      - name: user_id
        description: Sequential identifying number
        data_tests:
          - not_null
          - unique
      - name: user_pseudo_id
        description: ID created by GA4's stream
      - name: email
        description: Users' email address
      - name: name
        description: Users' name and surname
      - name: created_at
        description: Timestamp when the user was created
      - name: is_user_id_missing
        description: Booleand value if a user_id is missing, i.e NULL

  - name: stg_order_items
    description: >
      Staging model for order line items. One row per item per order.
    columns:
      - name: order_item_id
        description: Surrogate key generated from transaction_id and item_id
        data_tests:
          - not_null
          - unique
      - name: transaction_id
        description: Transaction ID sent to GA4
      - name: item_id
        description: Item ID
      - name: item_name
        description: Item name
      - name: item_category
        description: Item category
      - name: price
        description: Item price
      - name: quantity
        description: Quantity
        data_tests:
          - not_null
